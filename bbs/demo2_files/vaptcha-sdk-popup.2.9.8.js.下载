
/*
  Buid Time: 2021-4-2 13:48:10
*/
      
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e():"function"==typeof def&&def.amd?def(e):e()}(0,function(){"use strict";function t(t,e){function i(){this.constructor=t}s(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}function e(t,e,i,n){return new(i||(i=Promise))(function(s,a){function r(t){try{c(n.next(t))}catch(e){a(e)}}function o(t){try{c(n["throw"](t))}catch(e){a(e)}}function c(t){t.done?s(t.value):new i(function(e){e(t.value)}).then(r,o)}c((n=n.apply(t,e||[])).next())})}function i(t,e){function i(t){return function(e){return n([t,e])}}function n(i){if(s)throw new TypeError("Generator is already executing.");for(;c;)try{if(s=1,a&&(r=2&i[0]?a["return"]:i[0]?a["throw"]||((r=a["return"])&&r.call(a),0):a.next)&&!(r=r.call(a,i[1])).done)return r;switch(a=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,a=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(r=c.trys,!(r=r.length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){c=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){c.label=i[1];break}if(6===i[0]&&c.label<r[1]){c.label=r[1],r=i;break}if(r&&c.label<r[2]){c.label=r[2],c.ops.push(i);break}r[2]&&c.ops.pop(),c.trys.pop();continue}i=e.call(t,c)}catch(n){i=[6,n],a=0}finally{s=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}var s,a,r,o,c={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:i(0),"throw":i(1),"return":i(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o}var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s=(function(){"function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")}(),function(){function t(t){this.value=t}function e(e){function i(t,e){return new Promise(function(i,s){var o={key:t,arg:e,resolve:i,reject:s,next:null};r?r=r.next=o:(a=r=o,n(t,e))})}function n(i,a){try{var r=e[i](a),o=r.value;o instanceof t?Promise.resolve(o.value).then(function(t){n("next",t)},function(t){n("throw",t)}):s(r.done?"return":"normal",r.value)}catch(c){s("throw",c)}}function s(t,e){switch(t){case"return":a.resolve({value:e,done:!0});break;case"throw":a.reject(e);break;default:a.resolve({value:e,done:!1})}a=a.next,a?n(a.key,a.arg):r=null}var a,r;this._invoke=i,"function"!=typeof e["return"]&&(this["return"]=undefined)}"function"==typeof Symbol&&Symbol.asyncIterator&&(e.prototype[Symbol.asyncIterator]=function(){return this}),e.prototype.next=function(t){return this._invoke("next",t)},e.prototype["throw"]=function(t){return this._invoke("throw",t)},e.prototype["return"]=function(t){return this._invoke("return",t)}}(),Object,"undefined"==typeof global?self:global,function(t,e){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)}),a=function(){return a=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++){e=arguments[i];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s])}return t},a.apply(this,arguments)};Object;var r=function(t){var e=Object.create(null);return function(i){return e[i]||(e[i]=t(i))}},o={cached:r,extend:function(t,e){for(var i in e)t[i]=e[i];return t},throwError:function(t){throw new Error("vaptcha error: "+t)},isDef:function(t){return t!==undefined&&null!==t},isFunction:function(t){return"[object Function]"===Object.prototype.toString.call(t)},isObject:function(t){return null!==t&&"object"===(void 0===t?"undefined":n(t))},isElement:function(t){return"object"===(void 0===t?"undefined":n(t))&&t instanceof HTMLElement},isDownTime:function(t){var e=t.mode,i=t.outage;return!!e&&(e=e.toLowerCase(),i&&("offline"===e||"character"===e))},toRawType:function(t){return Object.prototype.toString.call(t).slice(8,-1)},capitalize:r(function(t){return void 0===t&&(t=""),t.charAt(0).toUpperCase()+t.slice(1)}),getIEVersion:r(function(){var t=navigator.userAgent,e=t.indexOf("compatible")>-1&&t.indexOf("MSIE")>-1,i=t.indexOf("Edge")>-1&&!e,n=t.indexOf("Trident")>-1&&t.indexOf("rv:11.0")>-1;if(e){new RegExp("MSIE (\\d+\\.\\d+);").test(t);var s=parseFloat(RegExp.$1);return s>=7&&s<=10?s:6}return i?11:n?11:Infinity})},c=a({},o,{isIe:function(){return c.getIEVersion()!==Infinity},stopDefault:function(t){t.cancelable&&(t=t||window.event,t.preventDefault?t.preventDefault():t.returnValue=!1)},findLastIndex:function(t,e){var i=t,n=i.length>>>0;if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var s=n-1;s>=0;){if(e.call(i,i[s]))return s;s--}return-1},getMaxZIndex:function(){for(var t=document.getElementsByTagName("div"),e=0,i=0,n=t;i<n.length;i++){var s=n[i];e=Math.max(e,Number(s.style.zIndex)||0)}return e<99999?99999:e},removeSelf:function(t){if(t){var e=t.parentElement||t.parentNode;e&&e.removeChild(t)}},removeSibling:function(t){if(t){var e=t.parentElement||t.parentNode;if(e)for(var i=e.childNodes.length-1;i>=0;i--)e.childNodes[i]!==t&&e.removeChild(e.childNodes[i])}},guid:function(){var t=(new Date).getTime();return"xx0xxxxx-xxxx-x7xx-yxxx-xx2xxxxxxxx1".replace(/[xy]/g,function(e){var i=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"===e?i:3&i|8).toString(16)})},addEventListener:function(t){var e=t.target,i=t.type,n=t.cb,s=t.useCapture;e&&(e.addEventListener?e.addEventListener(i,n,s):e["on"+i]=n)},removeEventListener:function(t){var e=t.target,i=t.type,n=t.cb;e&&(e.removeEventListener?e.removeEventListener(i,n):e["on"+i]=null)},getMouseCoords:function(t,e,i){return t=t||window.event,{x:t.clientX-i,y:t.clientY-e,time:t.timeStamp}},getTouchCoords:function(t,e,i){return{x:t.touches[0].clientX-i,y:t.touches[0].clientY-e,time:t.timeStamp}},getEventWhich:function(t){return t=t||window.event,t.which?t.which:2===t.button?3:t.button},stopEvent:function(t){t=t||window.event,t.stopPropagation(),c.stopDefault(t)},stopPropagation:function(t){t=t||window.event,t.stopPropagation()},delay:function(t){return e(this,void 0,void 0,function(){return i(this,function(e){return[2,new Promise(function(e){setTimeout(e,t)})]})})},extendStyle:function(t,e){for(var i in e)isNaN(parseInt(i))&&e.hasOwnProperty(i)&&(t.style[i]=e[i])}});c.isIe()&&(window.Event.prototype.stopPropagation=function(){this.cancelBubble=!0});var h=function(){function t(t){this.vaptcha=t}return t.prototype.listen=function(t,e){this.vaptcha.listen(t,e)},t.prototype.destroy=function(){this.vaptcha.destroy()},t.prototype.reset=function(){this.vaptcha.reset()},t.prototype.render=function(){this.vaptcha.render()},t.prototype.getToken=function(){var t=this.vaptcha,e=t.token;return t.token=null,e},t.prototype.renderTokenInput=function(t){this.vaptcha.isRenderToken=!0,"String"===c.toRawType(t)&&(t=document.querySelector(t)),c.isObject(t)&&c.isElement(t[0])&&(t=t[0]),this.vaptcha.renderForm=c.isElement(t)?t:this.vaptcha.container},t.prototype.validate=function(){this.vaptcha.validate()},t}();window.HTMLElement=window.HTMLElement||Element,Function.prototype.bind||(Function.prototype.bind=function(t){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var e=Array.prototype.slice.call(arguments,1),i=this,n=function(){},s=function(){return i.apply(this instanceof n&&t?this:t,e.concat(Array.prototype.slice.call(arguments)))};return n.prototype=this.prototype,s.prototype=new n,s}),Array.prototype.filter||(Array.prototype.filter=function(t){if(void 0===this||null===this)throw new TypeError;var e=Object(this),i=e.length>>>0;if("function"!=typeof t)throw new TypeError;for(var n=[],s=arguments.length>=2?arguments[1]:void 0,a=0;a<i;a++)if(a in e){var r=e[a];t.call(s,r,a,e)&&n.push(r)}return n}),String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}),Array.prototype.map||(Array.prototype.map=function(t,e){var i,n,s;if(null==this)throw new TypeError(" this is null or not defined");var a=Object(this),r=a.length>>>0;if("[object Function]"!=Object.prototype.toString.call(t))throw new TypeError(t+" is not a function");for(e&&(i=e),n=new Array(r),s=0;s<r;){var o,c;s in a&&(o=a[s],c=t.call(i,o,s,a),n[s]=c),s++}return n}),Array.prototype.includes||(Array.prototype.includes=function(t,e){if(null==this)throw new TypeError('"this" is null or not defined');var i=Object(this),n=i.length>>>0;if(0===n)return!1;for(var s=0|e,a=Math.max(s>=0?s:n-Math.abs(s),0);a<n;){if(i[a]===t)return!0;a++}return!1}),Array.prototype.findIndex||(Array.prototype.findIndex=function(t){if(null==this)throw new TypeError('"this" is null or not defined');var e=Object(this),i=e.length>>>0;if("function"!=typeof t)throw new TypeError("predicate must be a function");for(var n=arguments[1],s=0;s<i;){if(t.call(n,e[s],s,e))return s;s++}return-1}),document.getElementsByClassName||(window.Element.prototype.getElementsByClassName=document.constructor.prototype.getElementsByClassName=function(t){var e,i,n,s=this,a=[];if(s.querySelectorAll)return t||(t="*"),t=t.trim().split(" ").filter(function(t){return 0!==t.length}).join("."),"*"!==t&&(t="."+t),s.querySelectorAll(t);if(s.evaluate)for(i=".//*[contains(concat(' ', @class, ' '), ' "+t+" ')]",e=s.evaluate(i,s,null,0,null);n=e.iterateNext();)a.push(n);else for(e=s.getElementsByTagName("*"),i=new RegExp("(^|\\s)"+t+"(\\s|$)"),n=0;n<e.length;n++)i.test(e[n].className)&&a.push(e[n]);return a}),Object.create||(Object.create=function(t){var e=function(){};return e.prototype=t,new e}),window.Promise||function(){function t(t){var e=void 0===t?"undefined":n(t);return null!==t&&("object"===e||"function"===e)}function e(t){return"function"==typeof t}function i(t){L=t}function s(t){q=t}function a(){return function(){return process.nextTick(c)}}function r(){return void 0!==j?function(){j(c)}:o()}function o(){var t=setTimeout;return function(){return t(c,1)}}function c(){for(var t=0;t<R;t+=2)(0,Y[t])(Y[t+1]),Y[t]=void 0,Y[t+1]=void 0;R=0}function h(t,e){var i=this,n=new this.constructor(u);void 0===n[Z]&&S(n);var s=i._state;if(s){var a=arguments[s-1];q(function(){return T(s,n,a,i._result)})}else x(i,n,t,e);return n}function l(t){var e=this;if(t&&"object"==(void 0===t?"undefined":n(t))&&t.constructor===e)return t;var i=new e(u);return b(i,t),i}function u(){}function p(){return new TypeError("You cannot resolve a promise with itself")}function v(){return new TypeError("A promises callback cannot return that same promise.")}function d(t){try{return t.then}catch(e){return tt.error=e,tt}}function f(t,e,i,n){try{t.call(e,i,n)}catch(a){return a}}function m(t,e,i){q(function(t){var n=!1,s=f(i,e,function(i){n||(n=!0,e!==i?b(t,i):_(t,i))},function(e){n||(n=!0,C(t,e))},"Settle: "+(t._label||" unknown promise"));!n&&s&&(n=!0,C(t,s))},t)}function g(t,e){e._state===K?_(t,e._result):e._state===Q?C(t,e._result):x(e,void 0,function(e){return b(t,e)},function(e){return C(t,e)})}function y(t,i,n){i.constructor===t.constructor&&n===h&&i.constructor.resolve===l?g(t,i):n===tt?(C(t,tt.error),tt.error=null):void 0===n?_(t,i):e(n)?m(t,i,n):_(t,i)}function b(e,i){e===i?C(e,p()):t(i)?y(e,i,d(i)):_(e,i)}function w(t){t._onerror&&t._onerror(t._result),k(t)}function _(t,e){t._state===G&&(t._result=e,t._state=K,0!==t._subscribers.length&&q(k,t))}function C(t,e){t._state===G&&(t._state=Q,t._result=e,q(w,t))}function x(t,e,i,n){var s=t._subscribers,a=s.length;t._onerror=null,s[a]=e,s[a+K]=i,s[a+Q]=n,0===a&&t._state&&q(k,t)}function k(t){var e=t._subscribers,i=t._state;if(0!==e.length){for(var n=void 0,s=void 0,a=t._result,r=0;r<e.length;r+=3)n=e[r],s=e[r+i],n?T(i,n,s,a):s(a);t._subscribers.length=0}}function M(t,e){try{return t(e)}catch(i){return tt.error=i,tt}}function T(t,i,n,s){var a=e(n),r=void 0,o=void 0,c=void 0,h=void 0;if(a){if(r=M(n,s),r===tt?(h=!0,o=r.error,r.error=null):c=!0,i===r)return void C(i,v())}else r=s,c=!0;i._state!==G||(a&&c?b(i,r):h?C(i,o):t===K?_(i,r):t===Q&&C(i,r))}function E(t,e){try{e(function(e){b(t,e)},function(e){C(t,e)})}catch(i){C(t,i)}}function D(){return et++}function S(t){t[Z]=et++,t._state=void 0,t._result=void 0,t._subscribers=[]}function P(){return new Error("Array Methods must be provided an Array")}function A(t){return new it(this,t).promise}function B(t){var e=this;return new e(F(t)?function(i,n){for(var s=t.length,a=0;a<s;a++)e.resolve(t[a]).then(i,n)}:function(t,e){return e(new TypeError("You must pass an array to race."))})}function V(t){var e=this,i=new e(u);return C(i,t),i}function N(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function I(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function H(){var t=void 0;if("undefined"!=typeof global)t=global;else if("undefined"!=typeof self)t=self;else try{t=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var e=t.Promise;if(e){var i=null;try{i=Object.prototype.toString.call(e.resolve())}catch(e){}if("[object Promise]"===i&&!e.cast)return}t.Promise=nt}var O=void 0;O=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)};var F=O,R=0,j=void 0,L=void 0,q=function(t,e){Y[R]=t,Y[R+1]=e,2===(R+=2)&&(L?L(c):J())},W="undefined"!=typeof window?window:void 0,$=W||{},z=$.MutationObserver||$.WebKitMutationObserver,U="undefined"==typeof self&&"undefined"!=typeof process&&"[object process]"==={}.toString.call(process),X="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,Y=new Array(1e3),J=void 0;J=U?a():z?function(){var t=0,e=new z(c),i=document.createTextNode("");return e.observe(i,{characterData:!0}),function(){i.data=t=++t%2}}():X?function(){var t=new MessageChannel;return t.port1.onmessage=c,function(){return t.port2.postMessage(0)}}():void 0===W&&"function"==typeof require?function(){try{var t=Function("return this")().require("vertx");return j=t.runOnLoop||t.runOnContext,r()}catch(e){return o()}}():o();var Z=Math.random().toString(36).substring(2),G=void 0,K=1,Q=2,tt={error:null},et=0,it=function(){function t(t,e){this._instanceConstructor=t,this.promise=new t(u),this.promise[Z]||S(this.promise),F(e)?(this.length=e.length,this._remaining=e.length,this._result=new Array(this.length),0===this.length?_(this.promise,this._result):(this.length=this.length||0,this._enumerate(e),0===this._remaining&&_(this.promise,this._result))):C(this.promise,P())}return t.prototype._enumerate=function(t){for(var e=0;this._state===G&&e<t.length;e++)this._eachEntry(t[e],e)},t.prototype._eachEntry=function(t,e){var i=this._instanceConstructor,n=i.resolve;if(n===l){var s=d(t);if(s===h&&t._state!==G)this._settledAt(t._state,e,t._result);else if("function"!=typeof s)this._remaining--,this._result[e]=t;else if(i===nt){var a=new i(u);y(a,t,s),this._willSettleAt(a,e)}else this._willSettleAt(new i(function(e){return e(t)}),e)}else this._willSettleAt(n(t),e)},t.prototype._settledAt=function(t,e,i){var n=this.promise;n._state===G&&(this._remaining--,t===Q?C(n,i):this._result[e]=i),0===this._remaining&&_(n,this._result)},t.prototype._willSettleAt=function(t,e){var i=this;x(t,void 0,function(t){return i._settledAt(K,e,t)},function(t){return i._settledAt(Q,e,t)})},t}(),nt=function(){function t(e){this[Z]=D(),this._result=this._state=void 0,this._subscribers=[],u!==e&&("function"!=typeof e&&N(),this instanceof t?E(this,e):I())}return t.prototype["catch"]=function(t){return this.then(null,t)},t.prototype["finally"]=function(t){var e=this,i=e.constructor;return e.then(function(e){return i.resolve(t()).then(function(){return e})},function(e){return i.resolve(t()).then(function(){throw e})})},t}();nt.prototype.then=h,nt.all=A,nt.race=B,nt.resolve=l,nt.reject=V,nt._setScheduler=i,nt._setAsap=s,nt._asap=q,nt.polyfill=H,nt.Promise=nt,nt.polyfill()}();var l=function(){function t(t,e){this.imgUrl=t,this.id=e,this.paint=null,this.startPoint=null,this.startTimeStamp=null,this.startTime=null,this.drawtime=null,this.dragSpotData=[],this.vaptchaCanvasDiv=null,this._canvas=null,this._previousPoint=null,this._canvasContext=null,this._isModernBrowser=null,this._canvasWidth=this._canvasHeight=0,this._clickX=[],this._clickY=[],this._clickDrag=[]}return t.prototype.init=function(){this._clickX=[],this._clickY=[],this._clickDrag=[],this.dragSpotData=[],this.paint=this.startPoint=this._previousPoint=this.vaptchaCanvasDiv=this.startTimeStamp=null,this._canvasWidth=this._canvasHeight=0},t.prototype.analysisAngle=function(t){return Array.prototype.sort.call(t,function(t,e){return t.angleOffset-e.angleOffset}),!((c.findLastIndex(t,function(t){return 0===t.angleOffset})+1)/t.length>.95)},t.prototype.calculateCharacteristic=function(t){var e,i,n,s,a,r,o,c=[];c.push({acceleration:0,angle:0,angleOffset:0,coordOffset:{offsetX:0,offsetY:0},speed:0});for(var h=1,l=t.length;h<l;h++)s=t[h].time-t[h-1].time,n={offsetX:t[h].x-t[h-1].x,offsetY:t[h].y-t[h-1].y},o=Math.sqrt(Math.pow(n.offsetX,2)+Math.pow(n.offsetY,2)),a=this._getAngle(n.offsetX,n.offsetY),r=a-c[h-1].angle,e=o/s,i=(e-c[h-1].speed)/s,c.push({acceleration:i,angle:a,angleOffset:r,coordOffset:n,speed:e});return c},t.prototype.analysisAcceleration=function(t){return!(t.filter(function(t){return 0===t.acceleration}).length/t.length>.25)},t.prototype.addDragSpotData=function(t){this.startPoint?this._isAvailableData(this.startPoint,this._previousPoint,t,5)&&(this.paint=!0,this._previousPoint={x:t.x,y:t.y,time:0},this.dragSpotData.push({x:t.x,y:t.y,time:t.time-this.startPoint.time}),this.startPoint=null,this._canvas||this.prepareCanvas(0),this._redraw()):!0===this.paint&&(this.addClick(t.x,t.y,!0),this._isAvailableData(this.startPoint,this._previousPoint,t,5)&&(this._previousPoint={x:t.x,y:t.y,time:t.time-this.startTimeStamp},t.x>=0&&t.y>=0&&this.dragSpotData.push({x:t.x,y:t.y,time:t.time-this.startTimeStamp})),this._redraw())},t.prototype.overtimeCheck=function(){if((new Date).getTime()-this.startTime>8e3)return!0},t.prototype.prepareCanvas=function(t){var e=c.isIe()?"pencil_ie.cur":"pencil.cur",i=30,n=this.imgUrl+e;this.vaptchaCanvasDiv=this.createCanvasDiv(),this._canvas=document.createElement("canvas");for(var s,a=document.getElementsByClassName("vaptchaNavDiv"),r=null,o=0;o<a.length;o++)a[o].getAttribute("v-obj-id")===this.id&&(r=o);s=a[r].getElementsByClassName("vaptcha-pop").length>0?a[r].getElementsByClassName("vaptcha-pop")[0].getElementsByClassName("vaptcha")[0].getElementsByClassName("avoid-drag")[0]:a[r].getElementsByClassName("vaptcha")[0],i=/downtime|popup|invisible/i.test(t)?30:/embed|mobile/i.test(t)?30:0,this._canvasWidth=s.offsetWidth+2*i,this._canvasHeight=s.offsetHeight+60,this._canvas.setAttribute("width",this._canvasWidth.toString()),this._canvas.setAttribute("height",this._canvasHeight.toString()),this._canvas.setAttribute("id",this.id+"-vp-canvas"),this._canvas.style.position="fixed",this._canvas.style.left=s.getBoundingClientRect().left-i+"px",this._canvas.style.top=s.getBoundingClientRect().top-30+"px",this.canvasLeft=s.getBoundingClientRect().left-i,this.canvasTop=s.getBoundingClientRect().top-30,this.vaptchaCanvasDiv.style.cursor="url("+n+"),auto",this.vaptchaCanvasDiv.appendChild(this._canvas),this._initCanvasContext()},t.prototype.removeCanvas=function(){c.removeSelf(this.vaptchaCanvasDiv)},t.prototype.addClick=function(t,e,i){this._clickX.push(t),this._clickY.push(e),this._clickDrag.push(i)},t.prototype.createCanvasDiv=function(){var t=document.createElement("div");return t.setAttribute("id",this.id),t.setAttribute("style","position:fixed;left:0px;top:0px;right:0;bottom:0;z-index:"+(c.getMaxZIndex()+2)),document.getElementsByTagName("body")[0].appendChild(t),t},t.prototype._initCanvasContext=function(){this._isModernBrowser=!!document.createElement("canvas").getContext,this._isModernBrowser?this._canvasContext=this._canvas.getContext("2d"):(this._canvas=window.G_vmlCanvasManager.initElement(this._canvas),this._canvasContext=this._canvas.getContext("2d"))},t.prototype.H5SupportTest=function(){this._isModernBrowser=!!document.createElement("canvas").getContext},t.prototype._clearCanvas=function(){this._canvasContext&&this._canvasContext.clearRect(0,0,this._canvasWidth,this._canvasHeight)},t.prototype._redraw=function(){if(this._canvasContext){this._clearCanvas();for(var t=void 0,e=0,i=this._clickX.length;e<i;e++)t=5,this._canvasContext.beginPath(),this._clickDrag[e]&&e?this._canvasContext.moveTo(this._clickX[e-1],this._clickY[e-1]):this._canvasContext.moveTo(this._clickX[e],this._clickY[e]),this._canvasContext.lineTo(this._clickX[e],this._clickY[e]),this._canvasContext.closePath(),this._canvasContext.strokeStyle="#12C0FA",this._canvasContext.lineJoin="round",this._canvasContext.lineWidth=t,this._canvasContext.stroke();this._isModernBrowser||(this._canvas=window.G_vmlCanvasManager.initElement(this._canvas))}},t.prototype._isAvailableData=function(t,e,i,n){var s,a;return t?(s=Math.abs(t.x-i.x),a=Math.abs(t.y-i.y)):(s=Math.abs(e.x-i.x),a=Math.abs(e.y-i.y)),s>=n||a>=n},t.prototype._getAngle=function(t,e){var i=t,n=e,s=0;return i>0?0===n?s=0:n>0?s=180*Math.atan(n/i)/Math.PI:n<0&&(s=360-180*Math.atan(-n/i)/Math.PI):i<0?0===n?s=180:n>0?s=180-180*Math.atan(n/-i)/Math.PI:n<0&&(s=180*Math.atan(n/i)/Math.PI+180):s=n>0?90:n<0?270:undefined,s},t}(),u={support:"powered by VAPTCHA",support1:"powered by",support2:"",help:"How To Verify",helpTitle:"How To Verify",helpDesc:"Complete verification with mouse or finger",howToVerify:"How to verify?",refresh:"Refresh",close:"Close",drawCaptcha:"Copy the trajectory",inVerify:"checking...",clickVerify:"I'm not a robot",clickPass:"Pass",pass:"Pass, {time}s, defeat {score}% users",fail:"No pass, please try again",errCode:"Error: {code}",retry:"click to Retry.",refreshMany:"Frequent operation, ",expired:"verification expired,",timeout:"Time out, ",AccessDenied:"Time out",RefreshTooFast:"Request too fast, try again later!",challengeExpire:"Refresh page and try agian",RequestToMouch:"verification failed,request too much!",timeTooLong:"Timeout, redraw please."},p={support:"由VAPTCHA提供技术支持",support1:"由",support2:"提供技术支持",help:"使用帮助",helpTitle:"操作演示",helpDesc:"使用鼠标或手指绘制手势完成验证",howToVerify:"如何验证?",close:"关闭",refresh:"刷新",drawCaptcha:"请绘制图中手势完成人机验证",inVerify:"智能检测中...",clickVerify:"单击进行人机验证",clickPass:"验证通过",pass:"验证通过，用时{time}秒，超过{score}%的用户",fail:"人机验证未通过，请再试一次",errCode:"错误码：{code}",retry:"点击重试",refreshMany:"尝试次数过多，",expired:"验证过期，",timeout:"验证超时，",AccessDenied:"验证超时",RefreshTooFast:"频率过快，请稍后再试!",challengeExpire:"刷新页面重试",RequestToMouch:"验证失败，已超过频率上限",timeTooLong:" 验证超时，请重新绘制"},v={support:"由VAPTCHA提供技術支持",support1:"由",support2:"提供技術支持",help:"使用幫助",helpTitle:"操作演示",helpDesc:"使用鼠標或手指繪制手勢完成驗證",howToVerify:"如何驗證?",refresh:"刷新",close:"關閉",drawCaptcha:"請繪製圖中手勢完成人機驗證",inVerify:"智能檢測中...",clickVerify:"單擊進行人機驗證",clickPass:"驗證通過",pass:"驗證通過，用時{time}秒，超過{score}%的用戶",fail:"人機驗證未通過，請再試壹次",errCode:"錯誤碼：{code}",retry:"點擊重試",refreshMany:"嘗試次數過多，",expired:"驗證過期，",timeout:"驗證超時，",AccessDenied:"驗證超時",RefreshTooFast:"頻率過快，請稍後再試!",challengeExpire:"刷新頁面重試",RequestToMouch:"驗證失敗，已超過頻率上限",timeTooLong:"驗證超時，請重新繪製"},d={support:"VAPTCHAは技術をサポート",support1:"より",support2:"技術支援",help:"ヘルプ",helpTitle:"サンプル",helpDesc:"ジェスチャーを描いて検証を完了",howToVerify:"検証方法",close:"閉める",refresh:"リフレッシュ",drawCaptcha:"写真のジェスチャーを描いて人機検証を完了",inVerify:"検証中...",clickVerify:"クリックして人機検証を完了",clickPass:"検証に通過",pass:"検証に通過、時間{time}秒、{score}%のユーザーを超えた",fail:"人機検証失敗しました、もう一度ためしてください",errCode:"エラーコード：{code}",retry:"クリックして再実行",refreshMany:"試す回数が多すぎた，",expired:"検証の期限切れ，",timeout:"検証タイムアウト，",AccessDenied:"検証タイムアウト",RefreshTooFast:"頻度が早すぎ、後でもう一度お試しください!",challengeExpire:"ページを更新してもう一度お試しください",RequestToMouch:"検証が失敗し、制限の回数を超えた",timeTooLong:" 検証がタイムアウトしたので、やり直してください"},f={support:"Do VAPTCHA hỗ trợ kỷ thuật",support1:"Do",support2:"hỗ trợ kỷ thuật",help:"Trợ giúp",helpTitle:"Hướng dẫn thao tác",helpDesc:"Dùng chuột hoặc vẽ hình để xác minh",howToVerify:"Xác minh như thế nào?",close:"Đóng",refresh:"Làm mới",drawCaptcha:"Vui lòng vẽ hình để xác minh",inVerify:"Đang xác minh...",clickVerify:"Nhấp vào để xác minh",clickPass:"Xác minh thành công",pass:"Xác minh thành công, tg: {time} giây, hơn {score}% người dùng",fail:"Xác minh thất bại, vui lòng thử lại",errCode:"Mã lỗi: {code}",retry:"Nhấp vào thử lại",refreshMany:"Số lần thử lại quá nhiều, ",expired:"Xác minh hết hạn, ",timeout:"Xác minh vượt quá thời hạn, ",AccessDenied:"Xác minh vượt quá thời hạn",RefreshTooFast:"Tần suất quá nhanh, Vui lòng thử lại!",challengeExpire:"Làm mới trang để thử lại",RequestToMouch:"Xác minh thất bại, vui lòng thử lại",timeTooLong:" xác minh quá thời hạn, vui lòng vẽ lại"},m={en:u,"zh-TW":v,"zh-CN":p,jp:d,vi:f},g=function(){function t(t){this.langPackage=m[t||"zh-CN"]}return t.prototype.$t=function(t,e){return void 0===e&&(e={}),(this.langPackage[t]||t).replace(/\{(\w+)\}/g,function(t,i){return e[i]||t})},t}(),y=function(){function t(){}return t.prototype.GenerateFP=function(){var t=document.createElement("canvas"),e=t.getContext("2d"),i="http://www.vaptcha.com/";e.textBaseline="top",e.font="14px 'Arial'",e.textBaseline="tencent",e.fillStyle="#f60",e.fillRect(125,1,62,20),e.fillStyle="#069",e.fillText(i,2,15),e.fillStyle="rgba(102, 204, 0, 0.7)",e.fillText(i,4,17);var n=t.toDataURL(),s=n.replace("data:image/png;base64,","");return this.bin2hex(atob(s).slice(-16,-12))},t.prototype.bin2hex=function(t){for(var e="",i=0;i<t.length;i++){var n=t.charCodeAt(i);e+=this.byte2Hex(n>>8&255),e+=this.byte2Hex(255&n)}return e},t.prototype.byte2Hex=function(t){return t<16?"0"+t.toString():t.toString()},t}(),b=new y,w=function(){function t(){}return t.prototype.get=function(e,i,n){var s=this;return i=i||{},n=n||!1,new Promise(function(r){if(n){var o=(new Date).valueOf().toString();o===t.oldtime&&(o+="1"),t.oldtime=o;var c=setTimeout(function(){clearTimeout(c),h.remove(),r()},5e3);window["static"]=function(){clearTimeout(c),r.apply(this,arguments),h.remove()};var h=s.createJsonpScript(e)}else{var l="VaptchaJsonp"+(new Date).valueOf();window[l]&&(l+="1"),i=a({},i,{callback:l}),i=a({},i,{device:b.GenerateFP()}),e=s.getUrl(e,i);var u=s.createJsonpScript(e),p=setTimeout(function(){clearTimeout(p),window[l]=null,u.remove(),r({code:"5005",msg:"Time out,Refresh Again!"})},t.timeout);window[l]=function(){clearTimeout(p),r.apply(this,arguments),u.remove(),window[l]=null}}})},t.prototype.send=function(e){var i=this.getUrl("/ad",e),n=this.createJsonpScript(i);setTimeout(function(){n.remove()},t.timeout)},t.prototype.formatParams=function(t){var e="";for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e+="&"+i+"="+encodeURIComponent(t[i]));return e},t.prototype.getUrl=function(e,i){var n=this.formatParams(i),s=e.indexOf("http://")>-1||e.indexOf("https://")>-1;return e.indexOf("?")<0&&(n="?"+n.slice(1)),s?""+e+n:""+t.baseUrl+e+n},t.prototype.createJsonpScript=function(t){var e=document.getElementsByTagName("head")[0],i=document.createElement("script");return i.charset="UTF-8",i.src=t,e.appendChild(i),{remove:function(){e.removeChild(i)}}},t.baseUrl="",t.timeout=1e4,t.oldtime="",t}(),_=new w,C={getConfig:function(t){return e(this,void 0,Promise,function(){var e;return i(this,function(i){switch(i.label){case 0:return e={id:t.vid,type:t.type,scene:t.scene||0},[4,_.get("/config",e)];case 1:return[2,i.sent()]}})})},refresh:function(t){return e(this,void 0,Promise,function(){var e;return i(this,function(i){switch(i.label){case 0:return[4,_.get("/refresh",t)];case 1:return e=i.sent(),e.code=e.code||"0103",[2,e]}})})},click:function(t){return e(this,void 0,Promise,function(){return i(this,function(e){switch(e.label){case 0:return[4,_.get("/click",t,!1)];case 1:return[2,e.sent()]}})})},get:function(t){return e(this,void 0,Promise,function(){return i(this,function(e){switch(e.label){case 0:return[4,_.get("/get",t,!1)];case 1:return[2,e.sent()]}})})},verify:function(t){return e(this,void 0,Promise,function(){return i(this,function(e){switch(e.label){case 0:return[4,_.get("/validate",t,!1)];case 1:return[2,e.sent()]}})})},staticConfig:function(t){return e(this,void 0,Promise,function(){return i(this,function(e){switch(e.label){case 0:return[4,_.get(t.protocol+"channel.vaptcha.net/config/"+t.vid,{},!0)];case 1:return[2,e.sent()]}})})},clickAdvert:function(t){_.send(t)}},x={_sample:"abcdefgh234lmntuwxyz",_convertScale:function(t){t=Math.floor(t);var e=this._sample[t%20];t=Math.floor(t/20);var i=this._sample[t%20],n=Math.floor(t/20);return""+((n=n?this._sample[n]:"_")||"_")+(i||"_")+(e||"_")},assemblyCoordData:function(t){for(var e=[],i=[],n=[],s=0,a=t;s<a.length;s++){var r=a[s];e.push(this._convertScale(r.x)),i.push(this._convertScale(r.y)),n.push(this._convertScale(r.time))}return e.join("")+i.join("")+n.join("")}},k={AccessDenied:"0101",RefreshAgain:"0102",Success:"0103",Fail:"0104",RefreshTooFast:"0105",RefreshTanto:"0106",DrawTanto:"0107",Attack:"0108",ChannellError:"0109",JsonpTimeOut:"0703",challengeExpire:"0109",RequestToMouch:"0315",ResponseError:"0501"},M={init:["rgb(255,255,255)","#fff","0.4"],fail:["rgb(255,191,0)","#FFBF00","0.4"],error:["rgb(238,60,64)","#EE3C40","0.4"],success:["rgb(0,213,159)","#00D59F","0.4"]},T=function(){function t(){this.listeners={}}return t.prototype.add=function(t,e,i,n,s){var a=this.listeners;a[t]=a[t]||{},a[t][i]||(a[t][i]={target:e,type:i,cb:n},c.addEventListener(a[t][i]))},t.prototype.remove=function(t,e){if(this.listeners[t])if(e)c.removeEventListener(this.listeners[t][e]),this.listeners[t][e]=null;else{for(e in this.listeners[t])this.listeners[t].hasOwnProperty(e)&&this.remove(t,e);this.listeners[t]={}}},t.prototype.removeAll=function(t){if(void 0===t&&(t=!1),t)for(var e in this.listeners)this.listeners.hasOwnProperty(e)&&"close"!==e&&this.remove(e);else for(var e in this.listeners)this.listeners.hasOwnProperty(e)&&this.remove(e)},t}(),E=function(){function t(){this.timers={}}return t.prototype.delay=function(t,e){var i=this;return this.clear(t),new Promise(function(n){i.timers[t]=window.setTimeout(function(){i.clear(t),n()},e)})},t.prototype.clear=function(t){this.timers[t]&&clearTimeout(this.timers[t]),this.timers[t]=null},t.prototype.clearAll=function(){for(var t in this.timers)this.timers.hasOwnProperty(t)&&this.clear(t)},t}(),D=function(){function t(){}return t.prototype.IsMobile=function(){var t=navigator.userAgent,e=!1,i=(/(?:Windows Phone)/.test(t),/(?:SymbianOS)/.test(t),/(?:Android)/.test(t)),n=/(?:Firefox)/.test(t),s=(/(?:Chrome|CriOS)/.test(t),/(?:iPad|PlayBook)/.test(t)||i&&!/(?:Mobile)/.test(t)||n&&/(?:Tablet)/.test(t)),a=/(?:iPhone)/.test(t)&&!s;return(i||s||a||s)&&(e=!0),e},t}(),S=new D,P={HowToVerifyVIP:"https://www.vaptcha.com/document/howtoverify.html?isVip=1",HowToVerifyNormal:"https://www.vaptcha.com/document/howtoverify.html?isVip=0"},A=function(){function t(t){this.candraw=!1,this.isValidated=!1,this.validateCount=0,this.refreshCount=0,this.refreshCurrentAngular=0,this.isRenderToken=!1,this.isMobile=!1,this.time=0,this.id=c.guid(),this.options=t,this.knock=t.knock,this.lastChallenge=null,this.scene=t.scene,this.vid=t.vid,this.container=t.container,this.advertid=null,this.type=t.type,this.protocol="https://",this.mode=t.mode||"normal",this.isVip=0!==t.is_vip,this.isLight="light"===t.style,this.isShowHelp=t.guide,this.btnBgColor=t.color,this.vaptchaUrl=""+t.api_server,this.cdnUrl=""+this.protocol+t.cdn_servers[0]+"/",this.imgBaseUrl=this.protocol+"img.vaptcha.net/",this.listeners={},this.events={},this.i18n=new g(t.lang),this.eventManage=new T,this.timerManage=new E,this.canvas=new l(this.imgBaseUrl,this.id),w.baseUrl=this.protocol+this.vaptchaUrl,this.adType=t.ad.adType,this.adImage=t.ad.img||"",this.adlink=t.ad.link||"",this.discountPrice=t.ad.discountPrice,this.originalPrice=t.ad.originalPrice,this.productName=t.ad.productName,this.tbId=t.ad.tbId}
return t.prototype.listen=function(t,e){var i=this.events[t];this.events[t]=function(){c.isFunction(i)&&i.apply(this,arguments),c.isFunction(e)&&e.apply(this,arguments)}},t.prototype.emit=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=t.shift(),n=this.events[i];c.isFunction(n)&&n.apply(i,t)},t.prototype.destroy=function(){this.resetBaseState(),this.mainDiv&&this.resetStateMsg(),this.isValidated=!1},t.prototype.reset=function(){return e(this,void 0,void 0,function(){var t,e;return i(this,function(i){switch(i.label){case 0:return this.destroy(),[4,C.staticConfig(this.options)];case 1:return t=i.sent(),t.state?[2,Promise.reject("5001: VAPTCHA cell error")]:t.offline_state&&"offline"!==this.options.mode?""===this.options.offline_server?[2,Promise.reject("5002: offline_server not configured")]:(this.options.mode="offline",this.resetCaptcha("downtime",this.options),[2,Promise.reject("offline")]):[3,2];case 2:return""!==t.api&&(this.options.api_server=t.api),w.baseUrl=this.options.protocol+this.options.api_server,[4,C.getConfig(this.options)];case 3:return e=i.sent(),this.tokenInput&&c.removeSelf(this.tokenInput),this.knock=e.data.knock,[2,Promise.resolve()]}})})},t.prototype.getEmbedHtml=function(){var t=P.HowToVerifyNormal;return this.isVip&&(t=P.HowToVerifyVIP),'<div id="vaptcha" class="vaptcha">\n    <div class="vp-main">\n      <div class="vp-loading-pictrue">\n        <img src="'+this.cdnUrl+'img/vp-loading-pictrue.gif" />\n      </div>\n      <div class="avoid-drag"></div>\n      <img ondragstart="return false" class="vp-main-bg"/>\n      <div class="vp-opt">\n        '+(this.isShowHelp?'<div class="vp-logo">\n          <a class="vp-logo-own"\n          title="'+this.$t("howToVerify")+'"\n          href='+t+'\n          target="_blank"></a>\n        </div>':"")+'\n        <a class="vp-handle vp-refresh" title="'+this.$t("refresh")+'"></a>\n      </div>\n      <div class="vp-sponsor-ad">\n        <a class="sponsor"></a>\n      </div>\n      <div class="vp-state vp-s-init">\n        <i class="vp-s-icon"></i>\n        <span class="vp-s-txt">'+this.$t("drawCaptcha")+"</span>\n      </div>\n    </div>\n  </div>"},t.prototype.createVaptchaDiv=function(t,e){var i=document.createElement("div");return e=e||this.type,i.setAttribute("v-obj-id",this.id),i.className="vaptchaNavDiv vaptcha-"+e,i.innerHTML=t,i},t.prototype.renderTokenInput=function(){if(this.isRenderToken){var t=document.createElement("input");t.type="hidden",t.name="vaptcha_token",this.tokenInput=t,this.renderForm.appendChild(t)}},t.prototype.resetBaseState=function(t){void 0===t&&(t=!1),this.candraw=!1,this.isValidated=!1,this.validateCount=0,this.refreshCount=0,this.token=null,this.mainDiv&&(this.changePencilCursor(this.imgWrapper),this.refreshIconVisible(!0)),this.eventManage.removeAll(t),this.timerManage.clearAll()},t.prototype.$t=function(t,e){return this.i18n.$t(t,e)},t.prototype.loadFirstImg=function(){return e(this,void 0,void 0,function(){var t,e,n;return i(this,function(i){switch(i.label){case 0:return t=this.mainDiv.getElementsByClassName("vp-loading-pictrue")[0],t.style.display="block",this.imgDom.style.display="none",e={id:this.vid,knock:this.knock},[4,C.get(e)];case 1:return n=i.sent(),this.responseIsSuccess(n.code)&&(this.advertid=n.data.adid,this.insertCaptchaImage(n.data.img),this.updateAdInfo(n.data),this.stopVpDivActionEvent(),this.addRefreshEvent(),this.changePencilCursor(this.imgWrapper),this.addEventHandlerForImage(),this.addEventHandleForAdvert()),[2]}})})},t.prototype.updateAdInfo=function(t){var e=this.mainDiv.getElementsByClassName("vp-sponsor-ad")[0];if(t.adlinkword){var i=e.getElementsByTagName("a")[0];i.innerText=t.adlinkword,i.href=t.adlink,i.target="_blank",e.style.display="inline-block"}else e.style.display="none"},t.prototype.refreshImage=function(){return e(this,void 0,Promise,function(){var e,n,s,a,r;return i(this,function(i){switch(i.label){case 0:return(e=(new Date).getTime())-this.latestRefreshTime<1e3?(this.latestRefreshTime=e,[2,!0]):(this.latestRefreshTime=(new Date).getTime(),this.refreshCount>=t.refreshCountMax?(this.refreshManysHandle(),[2,!1]):(this.validateCount=0,this.refreshCount++,this.time=(new Date).getDate(),[4,C.getConfig(this.options)]));case 1:return n=i.sent(),this.knock=n.data.knock,s={id:this.vid,knock:this.knock},"embed"!==this.options.type?[3,3]:[4,C.get(s)];case 2:return r=i.sent(),[3,5];case 3:return[4,C.click(s)];case 4:r=i.sent(),i.label=5;case 5:return a=r,this.responseIsSuccess(a.code)&&(this.advertid=a.data.adid,this.insertCaptchaImage(a.data.img),this.updateAdInfo(a.data),this.changePencilCursor(this.imgWrapper),this.addEventHandlerForImage(),this.addEventHandleForAdvert()),[2,!0]}})})},t.prototype.responseIsSuccess=function(t){if(t===k.Success)return!0;this.resetBaseState(!0),t===k.JsonpTimeOut&&this.emit("error"),this.updateStateMsg("fail",this.getCodeMsg(t)+'，<a class="vp-refused-blue">'+this.$t("retry")+"</a>");var e=this.stateDiv.getElementsByClassName("vp-refused-blue")[0];return this.eventManage.add("retry",e,"touchend",this.refusedClick.bind(this)),this.eventManage.add("retry",e,"click",this.refusedClick.bind(this)),this.refreshIconVisible(!1),this.errorHandle(t),!1},t.prototype.errorHandle=function(t){this.insertCaptchaImage("requestFailed.jpg")},t.prototype.addRefreshEvent=function(){this.eventManage.add("refreshImage",this.vpDiv.getElementsByClassName("vp-refresh")[0],"click",this.refreshFunc.bind(this),!1)},t.prototype.refreshFunc=function(){var t=document.getElementsByClassName("vp-refresh")[0];this.refreshCurrentAngular=this.refreshCurrentAngular+180,t.style.transform="rotateZ("+this.refreshCurrentAngular+"deg)",this.refreshImage()},t.prototype.stopVpDivActionEvent=function(){var t=this;Array("vp-refresh","vp-logo-own","vp-sponsor-ad").map(function(e){var i=t.vpDiv.getElementsByClassName(e)[0];i&&(t.eventManage.add(e,i,"mousedown",c.stopPropagation),t.eventManage.add(e,i,"touchstart",c.stopPropagation),t.eventManage.add(e,i,"touchend",c.stopPropagation))})},t.prototype.insertCaptchaImage=function(t){if(this.autoRefreshImage(),this.candraw=!0,this.isValidated=!1,this.imgDom){var e=new Image,i=t,n=i.toString().indexOf("http"),s="";s=-1===n?this.imgBaseUrl+i:i,e.onload=this.imageOnload.bind(this,s),e.setAttribute("src",s)}},t.prototype.autoRefreshImage=function(){return e(this,void 0,void 0,function(){return i(this,function(e){switch(e.label){case 0:return[4,this.timerManage.delay("autoRefreshImage",t.autoRefreshTime)];case 1:return e.sent(),this.refreshImage(),[2]}})})},t.prototype.getCodeMsg=function(t){return{"0101":this.$t("AccessDenied"),"0105":this.$t("RefreshTooFast"),"0109":this.$t("challengeExpire"),"0315":this.$t("RequestToMouch")}[t]||this.$t("errCode",{code:t})},t.prototype.refreshManysHandle=function(t){var e;e=this.$t(t&&t.code===k.challengeExpire?"timeout":t&&"0304"===t.code?"expired":"refreshMany"),e=e+'<a class="vp-refused-blue">'+this.$t("retry")+"</a>",this.resetBaseState(!0),this.updateStateMsg("fail",e),this.refreshIconVisible(!1)},t.prototype.refreshIconVisible=function(t){this.mainDiv.getElementsByClassName("vp-refresh")[0].style.display=t?"block":"none"},t.prototype.imageOnload=function(t){this.mainDiv.getElementsByClassName("vp-loading-pictrue")[0].style.display="none",this.imgDom.style.display="block",this.imgDom.setAttribute("src",t)},t.prototype.addEventHandlerForImage=function(){var t=this.imgWrapper;this.eventManage.add("mainDiv",t,"touchstart",this.mainTouchStart.bind(this)),this.eventManage.add("mainDiv",t,"touchmove",this.mainTouchMouve.bind(this)),this.eventManage.add("mainDiv",t,"touchend",this.mainTouchEnd.bind(this)),this.eventManage.add("mainDiv",t,"touchcancel",this.mainTouchEnd.bind(this)),this.eventManage.add("mainDiv",t,"mouseover",this.imageMeCb.bind(this)),this.eventManage.add("mainDiv",t,"mousedown",this.mainMouseDown.bind(this))},t.prototype.addEventHandleForAdvert=function(){this.eventManage.add("advertEvent",this.mainDiv.getElementsByClassName("vp-sponsor-ad")[0],"click",this.advertEventHandle.bind(this))},t.prototype.advertEventHandle=function(t){this.lastChallenge!=this.knock&&(C.clickAdvert({advertid:this.advertid,id:this.vid,knock:this.knock}),this.lastChallenge=this.knock)},t.prototype.mainTouchStart=function(t){return e(this,void 0,void 0,function(){var e;return i(this,function(i){switch(i.label){case 0:return c.stopEvent(t),this.candraw&&(this.isMobile=!0,this.canvas.prepareCanvas(0),e=c.getTouchCoords(t,this.canvas.canvasTop,this.canvas.canvasLeft),this.canvas.addClick(e.x,e.y,!1),this.canvas.startTime=(new Date).getTime(),this.canvas.startTimeStamp=e.time,this.canvas.startPoint={x:e.x,y:e.y,time:e.time}),[4,this.resetStateMsg()];case 1:return i.sent(),this.hideStateMsg(),[2]}})})},t.prototype.mainTouchMouve=function(t){c.stopEvent(t),this.candraw&&this.canvas.addDragSpotData(c.getTouchCoords(t,this.canvas.canvasTop,this.canvas.canvasLeft))},t.prototype.mainTouchEnd=function(t){return e(this,void 0,void 0,function(){var e,n,s,a;return i(this,function(i){switch(i.label){case 0:return c.stopEvent(t),this.canvas.removeCanvas(),this.canvas.paint?(e=this.drawPredicate(),e?[3,2]:[4,this.timerManage.delay("stateMsg",212)]):[3,3];case 1:return i.sent(),this.stateDiv.style.bottom=null,[2,this.canvas.init()];case 2:return n=x.assemblyCoordData(e),s=this.canvas.calculateCharacteristic(e),this.canvas.analysisAngle(s)&&this.canvas.analysisAcceleration(s)&&(a=(new Date).valueOf()-this.canvas.startTime,this.canvas.drawtime=Math.round(a/1e3*10)/10,this.validateVaptcha({v:n,id:this.vid,knock:this.knock,drawtime:a,ch:this.canvas._canvasHeight,cw:this.canvas._canvasWidth})),this.canvas.init(),[3,5];case 3:return[4,c.delay(212)];case 4:i.sent(),this.stateDiv.style.bottom=null,i.label=5;case 5:return[2]}})})},t.prototype.imageMeCb=function(){},t.prototype.mainMouseDown=function(t){var e=this;if(c.stopEvent(t),this.hideStateMsg(),this.timerManage.clear("stateMsg"),this.candraw){this.isMobile=!1,this.canvas.vaptchaCanvasDiv||(this.canvas.prepareCanvas(this.type),this.canvasDiv=this.canvas.vaptchaCanvasDiv),this.eventManage.remove("canvasDiv"),this.eventManage.add("canvasDiv",this.canvasDiv,"mousemove",this.canvasMouseMove.bind(this)),this.eventManage.add("canvasDiv",this.canvasDiv,"mouseup",this.canvasMouseUp.bind(this)),this.eventManage.add("canvasDiv",this.canvasDiv,"mouseout",this.canvasMouseUp.bind(this)),this.eventManage.add("document",document,"contextmenu",function(t){c.stopDefault(t),e.eventManage.remove("document","contextmenu")});var i=c.getMouseCoords(t,this.canvas.canvasTop,this.canvas.canvasLeft);this.canvas.addClick(i.x,i.y,!1),this.canvas.startTime=(new Date).valueOf(),this.canvas.startTimeStamp=i.time,this.canvas.startPoint={x:i.x,y:i.y,time:i.time}}},t.prototype.canvasMouseMove=function(t){c.stopEvent(t);var e=c.getEventWhich(t);3!==e&&1!==e||!this.candraw||this.canvas.addDragSpotData(c.getMouseCoords(t,this.canvas.canvasTop,this.canvas.canvasLeft))},t.prototype.canvasMouseUp=function(t){c.stopEvent(t);var e=c.getEventWhich(t);if(this.canvas.removeCanvas(),this.resetStateMsg(),this.canvas.paint=!0,(3===e||1===e)&&this.knock&&this.canvas.paint){var i=this.drawPredicate();if(!i)return this.canvas.init();var n=x.assemblyCoordData(i),s=this.canvas.calculateCharacteristic(i);if(this.canvas.analysisAngle(s)&&this.canvas.analysisAcceleration(s)){var a=(new Date).valueOf()-this.canvas.startTime;this.canvas.drawtime=Math.round(a/1e3*10)/10,this.validateVaptcha({v:n,id:this.vid,knock:this.knock,drawtime:a,ch:this.canvas._canvasHeight,cw:this.canvas._canvasWidth})}this.canvas.init()}},t.prototype.validateVaptcha=function(t){return e(this,void 0,void 0,function(){var e;return i(this,function(i){switch(i.label){case 0:return this.candraw=!1,this.validateCount++,[4,C.verify(t)];case 1:return e=i.sent(),this.validateVaptchaCb(e),[2]}})})},t.prototype.validateVaptchaCb=function(n){return e(this,void 0,void 0,function(){var e,s,a;return i(this,function(i){switch(i.label){case 0:return n.code!==k.Fail?[3,3]:(this.candraw=!0,this.refreshCount>=t.refreshCountMax?(this.refreshManysHandle(),[2]):(e=this.validateCount>=t.validateCountMax,e?[4,!this.refreshImage()]:[3,2]));case 1:e=i.sent(),i.label=2;case 2:if(e)return[2];i.label=3;case 3:return s={"0109":this.validateChallengeExpireHandle,"0103":this.validateSuccessHandle,"0104":this.validateFailHandle},[k.challengeExpire,k.Success,k.Fail].includes(n.code)?s[n.code].call(this,n):(this.resetBaseState(!0),this.updateStateMsg("fail",n.code+'，<a class="vp-refused-blue">'+this.$t("retry")+"</a>"),a=this.stateDiv.getElementsByClassName("vp-refused-blue")[0],this.eventManage.add("retry",a,"touchend",this.refusedClick.bind(this)),this.eventManage.add("retry",a,"click",this.refusedClick.bind(this))),[2]}})})},t.prototype.refusedClick=function(t){return e(this,void 0,void 0,function(){return i(this,function(t){switch(t.label){case 0:return[4,this.reset()];case 1:return t.sent(),[2]}})})},t.prototype.updateStateMsg=function(t,e){var i=this.stateDiv.getElementsByClassName("vp-s-txt")[0];this.stateDiv.className="vp-state vp-s-"+t,i.innerHTML=e,this.stateDiv.style.bottom=null},t.prototype.resetStateMsg=function(){return e(this,void 0,void 0,function(){return i(this,function(t){switch(t.label){case 0:return this.hideStateMsg(),[4,this.timerManage.delay("stateMsg",212)];case 1:return t.sent(),this.updateStateMsg("init",this.$t("drawCaptcha")),[2]}})})},t.prototype.hideStateMsg=function(){this.stateDiv.style.bottom="-30px"},t.prototype.showErrorMsg=function(n){return e(this,void 0,void 0,function(){return i(this,function(e){switch(e.label){case 0:return this.updateStateMsg("fail",n),[4,this.timerManage.delay("stateMsg",t.msgShowTime)];case 1:return e.sent(),this.resetStateMsg(),[2]}})})},t.prototype.beforePassHook=function(){},t.prototype.validateSuccessHandle=function(t){return e(this,void 0,void 0,function(){var e;return i(this,function(i){switch(i.label){case 0:return this.timerManage.clear("stateMsg"),e=this.$t("pass",{time:this.canvas.drawtime,score:t.data.rate}),this.updateStateMsg("pass",e),this.imgWrapper.style.cursor="auto",this.resetBaseState(),this.refreshIconVisible(!1),[4,this.beforePassHook()];case 1:return i.sent(),this.setSuccessState(t),[2]}})})},t.prototype.setSuccessState=function(t){this.token=t.data.token,this.tokenInput&&(this.tokenInput.value=this.token),this.isValidated=!0,this.emit("pass"),this.autoResetVaptcha()},t.prototype.autoResetVaptcha=function(){return e(this,void 0,void 0,function(){return i(this,function(e){switch(e.label){case 0:return[4,this.timerManage.delay("autoResetVaptcha",t.autoRefreshTime)];case 1:return e.sent(),this.reset(),[2]}})})},t.prototype.validateChallengeExpireHandle=function(t){this.showErrorMsg(this.$t("fail"))},t.prototype.validateFailHandle=function(t){this.showErrorMsg(this.$t("fail"))},t.prototype.drawPredicate=function(){this.isMobile=S.IsMobile();var t=[],e=this.canvas.dragSpotData.length;if((new Date).valueOf()-this.canvas.startTime>8e3)return this.drawTimeAboveEightSec(),!1;if(e<=10)return!1;if(e>160)for(var i=Math.floor(e/160)+1,n=0;n<e;n+=i)this.isMobile?this.canvas.dragSpotData[n].y>=0&&this.canvas.dragSpotData[n].y<=this.canvas._canvasHeight&&this.canvas.dragSpotData[n].x>=0&&this.canvas.dragSpotData[n].x<=this.canvas._canvasWidth&&(n==e-1&&Math.floor(this.canvas.dragSpotData[n].time)%2==0&&(this.canvas.dragSpotData[n].time=Math.floor(this.canvas.dragSpotData[n].time)+1),t.push(this.canvas.dragSpotData[n])):(n==e-1&&Math.floor(this.canvas.dragSpotData[n].time)%2!=0&&(this.canvas.dragSpotData[n].time=Math.floor(this.canvas.dragSpotData[n].time)+1),t.push(this.canvas.dragSpotData[n]));else if(this.isMobile)for(var n=0;n<e;n++)this.canvas.dragSpotData[n].y>=0&&this.canvas.dragSpotData[n].y<=this.canvas._canvasHeight&&this.canvas.dragSpotData[n].x>=0&&this.canvas.dragSpotData[n].x<=this.canvas._canvasWidth&&(n==e-1&&Math.floor(this.canvas.dragSpotData[n].time)%2==0&&(this.canvas.dragSpotData[n].time=Math.floor(this.canvas.dragSpotData[n].time)+1),t.push(this.canvas.dragSpotData[n]));else Math.floor(this.canvas.dragSpotData[e-1].time)%2!=0&&(this.canvas.dragSpotData[e-1].time=Math.floor(this.canvas.dragSpotData[e-1].time)+1),t=this.canvas.dragSpotData;return t},t.prototype.drawTimeAboveEightSec=function(){this.showErrorMsg(this.$t("timeTooLong"))},t.prototype.changePencilCursor=function(t){if(t)if(!this.isValidated&&this.candraw){var e=c.isIe()?"img/pencil_ie.cur":"img/pencil.png",i=this.cdnUrl+e;t.style.cursor="url("+i+"),auto"}else t.style.cursor="auto"},t.validateCountMax=2,t.refreshCountMax=5,t.msgShowTime=1e3,t.autoRefreshTime=18e4,t}(),B=function(n){function s(t){var e=n.call(this,t)||this;return e.getImageSize=c.cached(function(){var t=document.body.offsetWidth||400;return t>400?{width:400,height:230}:{width:t,height:.575*t}}),e.isClick=!1,e}return t(s,n),s.prototype.render=function(){return e(this,void 0,void 0,function(){return i(this,function(t){return this.getVaptchElement(),this.initEvent(),this.emit("mounted"),this.emit("ready"),this.renderTokenInput(),[2]})})},s.prototype.resetBaseState=function(){n.prototype.resetBaseState.call(this),this.isClick=!1},s.prototype.getVaptchElement=function(){this.vpDiv=this.vpDiv||this.createPopupDiv(),document.body.appendChild(this.vpDiv),this.mainDiv=this.vpDiv.getElementsByClassName("vp-main")[0],this.imgDom=this.mainDiv.getElementsByClassName("vp-main-bg")[0],this.imgWrapper=this.mainDiv.getElementsByClassName("vp-code")[0],this.stateDiv=this.mainDiv.getElementsByClassName("vp-state")[0]},s.prototype.getMainPopHtml=function(){var t=P.HowToVerifyNormal;this.isVip&&(t=P.HowToVerifyVIP);var e=this.isShowHelp?'<a class="vp-btn-tip"\n            title="'+this.$t("howToVerify")+'"\n            href="'+t+'" target="_blank">\n            <i class="vp-guide"></i>\n          </a>':"";return'\n      <div class="vaptcha-pop">\n        <div id="vaptcha" class="vaptcha">\n          <div class="vp-main">\n            <div class="vp-code">\n              <div class="vp-loading-pictrue">\n                <img src="'+this.cdnUrl+'img/vp-loading-pictrue.gif" />\n              </div>\n              <div class="avoid-drag"></div>\n              <img ondragstart="return false" class="vp-main-bg" />\n              \x3c!--频率--\x3e\n            </div>\n            <div class="vp-frequency">\n              <span class="vp-frequency-low"></span>\n            </div>\n            <div class="vp-sponsor-ad">\n              <a class="sponsor"></a>\n              <a class="platform-ad"></a>\n            </div>\n            <div class="vp-opt">\n              <div class="vp-state vp-s-init">\n                <i class="vp-s-icon"></i>\n                <span class="vp-s-txt">'+this.$t("drawCaptcha")+'</span>\n              </div>\n              <div class="vp-btn-group">\n                <a class="vp-btn-refresh" title="'+this.$t("refresh")+'">\n                  <i class="vp-handle vp-refresh"></i>\n                </a>\n                '+e+'\n                <a class="vp-btn-close" title="'+this.$t("close")+'">\n                  <i class="vp-handle vp-close"></i>\n                </a>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n      <div class="vaptcha-mask"></div>\n      '},s.prototype.getMainPopDiv=function(){return n.prototype.createVaptchaDiv.call(this,this.getMainPopHtml(),"popup")},s.prototype.createPopupDiv=function(){var t=this.getMainPopDiv(),e=c.getMaxZIndex();c.extendStyle(t,{position:"fixed",zIndex:e,display:"none"});var i=t.getElementsByClassName("vaptcha-pop")[0];return i.style.zIndex=""+e+2,c.extendStyle(i,{zIndex:e+2,width:"0",height:"0"}),c.getIEVersion()<9&&c.extendStyle(i,{marginTop:"-135px",marginLeft:"-200px"}),this.popDiv=i,t},s.prototype.initEvent=function(){var t=this,e=this.vpDiv.getElementsByClassName("vp-close")[0],i=function(){t.closePopup(),t.emit("close")};this.eventManage.add("close",e,"click",i.bind(this)),this.eventManage.add("close",e,"touchstart",i.bind(this)),this.eventManage.add("esc",document,"keydown",function(t){t=t||window.event,27===t.keyCode&&i()}),this.addEventHandlerForImage(),this.addEventHandleForAdvert(),this.addRefreshEvent()},s.prototype.clickValidate=function(){return e(this,void 0,void 0,function(){var t,e;return i(this,function(i){switch(i.label){case 0:return t={id:this.vid,knock:this.knock},[4,C.click(t)];case 1:return e=i.sent(),this.isClick=!0,[2,e]}})})},s.prototype.showPopup=function(){return e(this,void 0,void 0,function(){var t;return i(this,function(e){switch(e.label){case 0:return t=this.getImageSize(),this.vpDiv.style.display="block",document.body.style.overflow="hidden",this.popDiv.style.width=t.width+"px",[4,c.delay(10)];case 1:return e.sent(),this.popDiv.style.height=t.height+40+"px",[2]}})})},s.prototype.closePopup=function(){return e(this,void 0,void 0,function(){return i(this,function(t){return document.body.style.overflow="",this.popDiv.style.height="0",this.vpDiv.style.display="none",this.popDiv.style.width="0",[2]})})},s.prototype.beforePassHook=function(){return e(this,void 0,void 0,function(){return i(this,function(t){switch(t.label){case 0:return[4,c.delay(s.popupSuccessTime)];case 1:return t.sent(),this.closePopup(),[2]}})})},s.prototype.addFrequencyToProgressBar=function(t){var e,i=this.mainDiv.getElementsByClassName("vp-frequency")[0];t=t<0?0:t,i&&(e=i.getElementsByTagName("span")[0]),e&&(e.className=t<=50?"vp-frequency-low":t>50&&t<100?"vp-frequency-middle":"vp-frequency-hight",e.style.width=t+"%")},s.popupSuccessTime=500,s}(A),V=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){return setTimeout(t,1e3/60)},N=function(){function t(t){if(null!==(this._el=t.container.getElementsByClassName(t.id)[0])){this._radius=t.radius||10,this._duration=t.duration===undefined?500:t.duration,this._value=0,this._maxValue=t.maxValue||100,this._text=t.text===undefined?function(t){return this.htmlifyNumber(t)}:t.text,this._strokeWidth=t.width||10,this._colors=t.colors||["#EEE","#F00"],this._svg=null,this._movingPath=null,this._wrapContainer=null,this._textContainer=null,this._wrpClass=t.wrpClass||"circles-wrp",this._textClass=t.textClass||"circles-text",this._valClass=t.valueStrokeClass||"circles-valueStroke",this._maxValClass=t.maxValueStrokeClass||"circles-maxValueStroke",this._styleWrapper=!1!==t.styleWrapper,this._styleText=!1!==t.styleText;var e=Math.PI/180*270;this._start=-Math.PI/180*90,this._startPrecise=this._precise(this._start),this._circ=e-this._start,this._generate().update(t.value||0)}}return t.prototype._generate=function(){return this._svgSize=2*this._radius,this._radiusAdjusted=this._radius-this._strokeWidth/2,this._generateSvg()._generateText()._generateWrapper(),this._el.innerHTML="",this._el.appendChild(this._wrapContainer),this},t.prototype._setPercentage=function(t){this._movingPath.setAttribute("d",this._calculatePath(t,!0)),this._textContainer.innerHTML=this._getText(this.getValueFromPercent(t))},t.prototype._generateWrapper=function(){return this._wrapContainer=document.createElement("div"),this._wrapContainer.className=this._wrpClass,this._styleWrapper&&(this._wrapContainer.style.position="relative",this._wrapContainer.style.display="inline-block"),this._wrapContainer.appendChild(this._svg),this._wrapContainer.appendChild(this._textContainer),this},t.prototype._generateText=function(){return this._textContainer=document.createElement("div"),this._textContainer.className=this._textClass,this._styleText&&c.extendStyle(this._textContainer,{position:"absolute",top:0,left:0,textAlign:"center",width:"100%",fontSize:.7*this._radius+"px",height:this._svgSize+"px",lineHeight:this._svgSize+"px"}),this._textContainer.innerHTML=this._getText(0),this},t.prototype._getText=function(t){return this._text?(t===undefined&&(t=this._value),t=parseFloat(t.toFixed(2)),"function"==typeof this._text?this._text.call(this,t):this._text):""},t.prototype._generateSvg=function(){return this._svg=document.createElementNS("http://www.w3.org/2000/svg","svg"),this._svg.setAttribute("xmlns","http://www.w3.org/2000/svg"),this._svg.setAttribute("width",""+this._svgSize),this._svg.setAttribute("height",""+this._svgSize),this._generatePath({percentage:100,open:!1,color:this._colors[0],pathClass:this._maxValClass,opcity:this._colors[2]})._generatePath({percentage:1,open:!0,color:this._colors[1],pathClass:this._valClass,opcity:null}),this._movingPath=this._svg.getElementsByTagName("path")[1],this},t.prototype._generatePath=function(t){var e=t.percentage,i=t.open,n=t.color,s=t.pathClass,a=t.opcity,r=document.createElementNS("http://www.w3.org/2000/svg","path");return r.setAttribute("fill","transparent"),r.setAttribute("stroke",n),r.setAttribute("stroke-width",""+this._strokeWidth),r.setAttribute("d",this._calculatePath(e,i)),r.setAttribute("class",s),a&&(r.style.opacity=a),this._svg.appendChild(r),this},t.prototype._calculatePath=function(t,e){return this._arc(this._precise(this._start+t/100*this._circ),e)},t.prototype._arc=function(t,e){var i=t-.001,n=t-this._startPrecise<Math.PI?0:1;return["M",this._radius+this._radiusAdjusted*Math.cos(this._startPrecise),this._radius+this._radiusAdjusted*Math.sin(this._startPrecise),"A",this._radiusAdjusted,this._radiusAdjusted,0,n,1,this._radius+this._radiusAdjusted*Math.cos(i),this._radius+this._radiusAdjusted*Math.sin(i),e?"":"Z"].join(" ")},t.prototype._precise=function(t){return Math.round(1e3*t)/1e3},t.prototype.htmlifyNumber=function(t,e,i){e=e||"circles-integer",i=i||"circles-decimals";var n=(""+t).split("."),s='<span class="'+e+'">'+n[0]+"</span>";return n.length>1&&(s+='.<span class="'+i+'">'+n[1].substring(0,2)+"</span>"),s},t.prototype.updateRadius=function(t){return this._radius=t,this._generate().update(!0)},t.prototype.updateWidth=function(t){return this._strokeWidth=t,this._generate().update(!0)},t.prototype.updateColors=function(t){this._colors=t;var e=this._svg.getElementsByTagName("path");return e[0].setAttribute("stroke",t[0]),e[1].setAttribute("stroke",t[1]),this},t.prototype.getPercent=function(){return 100*this._value/this._maxValue},t.prototype.getValueFromPercent=function(t){return this._maxValue*t/100},t.prototype.getValue=function(){return this._value},t.prototype.getMaxValue=function(){return this._maxValue},t.prototype.update=function(t,e){if(!0===t)return this._setPercentage(this.getPercent()),this;if(this._value===t||isNaN(t))return this;e===undefined&&(e=this._duration);var i=this.getPercent(),n=1;if(this._value=Math.min(this._maxValue,Math.max(0,t)),!e)return this._setPercentage(this.getPercent()),this;var s=this.getPercent(),a=s>i;n+=s%1;var r=Math.floor(Math.abs(s-i)/n),o=e/r,c=this;return function h(t){if(a?i+=n:i-=n,a&&i>=s||!a&&i<=s)return void V(function(){c._setPercentage(s)});V(function(){c._setPercentage(i)});var e=Date.now(),r=e-t;r>=o?h(e):setTimeout(function(){h(Date.now())},o-r)}(Date.now()),this},t.create=function(e){return new t(e)},t}(),I=function(n){function s(t){var e=n.call(this,t)||this;return e.showHelpPopup=function(){var t="";document.getElementById("iframe-vapthca")||(t='<iframe id="iframe-vapthca" src="https://www.vaptcha.com/document/mobilefaq.html" frameborder="0" style="width: 100%; height: 100%"></iframe>');var i=document.createElement("div");i.className="vaptcha-mobile vaptcha-mobile-help",i.innerHTML='\n      <div class="vaptcha-mobile-main">\n        <div class="vaptcha-help-close-mb ">\n          <span class="vaptcha-help-close-mobile vp-close"></span>\n        </div>\n        <div class="vaptcha-pop vaptcha-pop-mobile">\n          '+t+"\n        </div>\n      </div>\n      ";var n=i.getElementsByClassName("vaptcha-pop")[0];return i.addEventListener("click",function(){c.removeSelf(i)}),function(){c.extendStyle(n,e.popDiv.style),c.extendStyle(n,{height:"90%",width:"100%"}),i.style.zIndex=c.getMaxZIndex()+"",document.body.appendChild(i)}}(),e.time=0,e}return t(s,n),s.prototype.render=function(){return e(this,void 0,void 0,function(){var t,e;return i(this,function(i){switch(i.label){case 0:return[4,this.loadImage("https://statics-bj.vaptcha.net/img/v1.0.4beat-new.png")];case 1:return i.sent(),t=this.isLight,t?[4,this.loadImage("https://statics-bj.vaptcha.net/v_light.png")]:[3,3];case 2:t=i.sent(),i.label=3;case 3:return n.prototype.render.call(this),this.time=(new Date).getTime(),this.isShowHelp&&(e=this.btnDiv.getElementsByClassName("vp-about")[0],this.eventManage.add("vpAbout",e,"touchstart",c.stopPropagation),this.eventManage.add("vpAbout",e,"click",c.stopPropagation)),this.initBtnHeight(),this.addBtnAnimation(),[2]}})})},s.prototype.loadImage=function(t){return new Promise(function(e){var i=new Image;i.onload=e,i.src=t})},s.prototype.reset=function(){return e(this,void 0,void 0,function(){return i(this,function(t){switch(t.label){case 0:return[4,n.prototype.reset.call(this)];case 1:return t.sent(),this.render(),[2]}})})},s.prototype.refreshManysHandle=function(){n.prototype.refreshManysHandle.call(this);var t=this.stateDiv.getElementsByClassName("vp-refused-blue")[0];this.eventManage.add("retry",t,"touchend",this.refusedClick.bind(this)),this.eventManage.add("retry",t,"click",this.refusedClick.bind(this))},s.prototype.refusedClick=function(t){return e(this,void 0,void 0,function(){return i(this,function(e){switch(e.label){case 0:return[4,n.prototype.refusedClick.call(this,t)];case 1:return e.sent(),this.clickValidateHandle(t),[2]}})})},s.prototype.getVaptchElement=function(){n.prototype.getVaptchElement.call(this),this.container.innerHTML=this.getMainHtml(),this.btnDiv=this.container.getElementsByClassName("vp-basic-btn")[0],this.tip=this.btnDiv.getElementsByClassName("vp-tip")[0]},s.prototype.getBtnHelpHtml=function(){var t=this,e=t.btnBgColor,i=t.isShowHelp,n=t.isLight,s=e?"style='background-color: "+e+"'":"",a=P.HowToVerifyNormal;this.isVip&&(a=P.HowToVerifyVIP);var r=this.isMobile?"<a class='vp-about vp-vertical vp-mobile-faq'\n        title='"+this.$t("howToVerify")+"'>\n        <span class='vp-vertical-cont'>\n          <i></i>\n        </span>\n      </a>":"<a class='vp-about vp-vertical'\n        href="+a+"\n        title='"+this.$t("howToVerify")+"' target='_blank'>\n        <span class='vp-vertical-cont'>\n          <i></i>\n        </span>\n      </a>",o="<a class='vp-about'  "+s+"\n         href="+a+" target='_blank'\n         title='"+this.$t("howToVerify")+"'>\n          <span class='vp-about-img'> </span>\n        </a>";return i?n?o:r:""},s.prototype.getMainHtml=function(){var t=this.btnBgColor,e=t?"style='background-color: "+t+"'":"",i=this.getBtnHelpHtml(),n="\n    <div class='vp-basic-btn vp-dark-btn vp-default-btn vp-waves' "+e+">\n      <div class='vp-btn-bg'></div>\n      <div class='vp-basic-cont'>\n        <div class='vp-shield vp-vertical'>\n          <span class='vp-vertical-cont'>\n            <i class=vp-circle-i></i>\n            \x3c!--hover 'u5706'u7F29'u653E--\x3e\n            <span class='vp-circle-h'></span>\n          </span>\n        </div>\n        "+i+"\n        <div class='vp-tip'>"+this.$t("clickVerify")+"</div>\n      </div>\n    </div>\n    ",s="\n    <div class='vp-basic-btn vp-light-btn vp-default-btn'>\n      <div class='vp-light-bg '></div>\n      <div class='vp-basic-cont '>\n        <div class='vp-basic-bar'></div>\n        <div class='vp-shield vp-vertical' "+e+">\n          <span class='vp-vertical-cont'>\n            <span class='vp-circle-h'></span>\n          </span>\n        </div>\n        "+i+"\n      <div class='vp-tip'>"+this.$t("clickVerify")+"</div>\n    </div>";return this.isLight?s:n},s.prototype.addBtnAnimation=function(){if(c.getIEVersion()<=9){var t=this.btnDiv.getElementsByClassName("vp-circle-h")[0];return void(t&&(t.style.display="none"))}if(this.isLight)this.eventManage.add("btnAnimation",this.btnDiv,"mouseover",this.basicBtnMouseOverCb.bind(this)),
this.eventManage.add("btnAnimation",this.btnDiv,"mouseout",this.basicBtnMouseOutCb.bind(this));else{var e=function(t){var e="";for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e+=i+":"+t[i]+";");return e},i=function(t){var e={top:0,left:0},i=document.documentElement;return"undefined"!=typeof t.getBoundingClientRect&&(e=t.getBoundingClientRect()),{top:e.top+window.pageYOffset-i.clientTop,left:e.left+window.pageXOffset-i.clientLeft}},n=function(t){var n=t.target||t.srcElement,s=document.createElement("div");n.appendChild(s);var a=i(n),r=t.pageY-a.top,o=t.pageX-a.left,c="scale("+n.clientWidth/100*10+")",h={top:r+"px",left:o+"px"};s.className=s.className+" waves-animation",s.setAttribute("style",e(h)),h["-webkit-transform"]=c,h["-moz-transform"]=c,h["-ms-transform"]=c,h["-o-transform"]=c,h.transform=c,h.opacity="1",h["-webkit-transition-duration"]="1000ms",h["-moz-transition-duration"]="1000ms",h["-o-transition-duration"]="1000ms",h["transition-duration"]="1000ms",h["-webkit-transition-timing-function"]="cubic-bezier(0.250, 0.460, 0.450, 0.940)",h["-moz-transition-timing-function"]="cubic-bezier(0.250, 0.460, 0.450, 0.940)",h["-o-transition-timing-function"]="cubic-bezier(0.250, 0.460, 0.450, 0.940)",h["transition-timing-function"]="cubic-bezier(0.250, 0.460, 0.450, 0.940)",s.setAttribute("style",e(h));var l={opacity:0,"-webkit-transition-duration":"1000ms","-moz-transition-duration":"1000ms","-o-transition-duration":"1000ms","transition-duration":"1000ms","-webkit-transform":c,"-moz-transform":c,"-ms-transform":c,"-o-transform":c,top:r+"px",left:o+"px"};!function(t,i){var n=setTimeout(function(){window.clearTimeout(n),i.setAttribute("style",e(l));var t=setTimeout(function(){window.clearTimeout(t),i.parentNode&&i.parentNode.removeChild(i)},1e3)},100)}(0,s)},s=this.btnDiv.getElementsByClassName("vp-circle-i")[0];this.eventManage.add("btnAnimation",this.btnDiv,"mouseover",function(t){t=t||window.event,c.isIe()&&s&&(s.style.display="none"),n(t),c.stopPropagation(t)}),c.isIe()&&this.eventManage.add("btnAnimation",this.btnDiv,"mouseout",function(){s&&(s.style.display="inline-block")})}},s.prototype.basicBtnMouseOverCb=function(){var t=this.btnDiv.getElementsByClassName("vp-shield vp-vertical")[0];t.style.backgroundColor="transparent",t.getElementsByClassName("vp-vertical-cont")[0].style.backgroundImage="none";var e=t.getElementsByClassName("vp-circle-h")[0];e&&(e.style.display="inline-block",e.style.borderColor=this.btnBgColor)},s.prototype.basicBtnMouseOutCb=function(){var t=this.btnDiv.getElementsByClassName("vp-shield vp-vertical")[0];t.getElementsByClassName("vp-vertical-cont")[0].style.backgroundImage="",this.updateLightLRBgColor();var e=t.getElementsByClassName("vp-circle-h")[0];e&&(e.style.display="none")},s.prototype.updateLightLRBgColor=function(){var t,e=this.btnDiv.getElementsByClassName("vp-shield vp-vertical")[0],i=this.btnDiv.getElementsByClassName("vp-about")[0];this.isLight&&(t=this.btnBgColor?this.btnBgColor:"",i&&(i.style.backgroundColor=t),e&&(e.style.backgroundColor=t))},s.prototype.initBtnHeight=function(){var t=this.btnDiv.offsetHeight;t=t>36?t:36,this.btnDiv.style.height=t+"px",this.isLight?this.btnDiv.getElementsByClassName("vp-basic-cont ")[0].style.top=(t-46)/2+"px":this.tip.style.lineHeight=t+"px"},s.prototype.initEvent=function(){n.prototype.initEvent.call(this);var t=this.container.getElementsByClassName("vp-mobile-faq")[0];this.eventManage.add("btnClick",this.btnDiv,"click",this.clickValidateHandle.bind(this)),this.eventManage.add("btnClick",this.btnDiv,"touchstart",this.clickValidateHandle.bind(this)),t&&(this.eventManage.add("faqbtn",t,"click",this.showHelpPopup.bind(this)),this.eventManage.add("faqbtn",t,"touchend",this.showHelpPopup.bind(this)))},s.prototype.beforePassHook=function(){return e(this,void 0,void 0,function(){return i(this,function(t){switch(t.label){case 0:return this.eventManage.removeAll(),[4,n.prototype.beforePassHook.call(this)];case 1:return t.sent(),this.drawSuccessBtn(),[2]}})})},s.prototype.clickValidateHandle=function(t){return e(this,void 0,void 0,function(){var e;return i(this,function(i){switch(i.label){case 0:return c.stopEvent(t),this.time<(new Date).getTime()-18e4?[4,this.reset()]:[3,2];case 1:i.sent(),i.label=2;case 2:return this.isClick?[2,this.showPopup()]:[4,this.clickValidate()];case 3:return e=i.sent(),this.responseIsSuccess(e.code)&&(""==e.data.token?(this.advertid=e.data.adid,this.insertCaptchaImage(e.data.img),this.changePencilCursor(this.imgWrapper),this.updateAdInfo(e.data),this.addFrequencyToProgressBar(e.data.frequency),this.stopVpDivActionEvent(),this.showPopup()):""!==e.data.token&&(this.resetBaseState(),this.drawSuccessBtn(),this.setSuccessState(e))),[2]}})})},s.prototype.responseIsSuccess=function(t){return!!n.prototype.responseIsSuccess.call(this,t)||(this.drawFailBtn(t),!1)},s.prototype.drawFailBtn=function(t){return e(this,void 0,void 0,function(){var e;return i(this,function(i){return e="<span class='vp-ring'><i></i></span><span class='vp-ring-compatible'><i></i></span>",this.tip.innerText=this.getCodeMsg(t),this.updateBtnLeftCont(e),this.renderBtnLeftRing(),this.updateBtnClassName("vp-fail-btn"),this.updateBtnClassName("vp-fail-btn fail-ing"),[2]})})},s.prototype.drawSuccessBtn=function(){return e(this,void 0,void 0,function(){var t,e;return i(this,function(i){switch(i.label){case 0:return this.eventManage.remove("btnAnimation"),t="\n    <div class='vp-chart-ring'>\n      <div class='vp-factor-chart'> <i></i> <span class='vp-shade'></span>\n        <div class='vp-canvas-ring'>\n          <div class='circle'></div>\n        </div>\n      </div>\n    </div>\n    <span class='vp-ring-compatible'>\n      <i></i>\n    </span>",this.tip.innerText=this.$t("clickPass"),e=this.btnDiv.getElementsByClassName("vp-about")[0],e&&(e.style.backgroundColor=""),this.updateBtnLeftCont(t),this.renderBtnLeftRing(),this.updateBtnClassName("vp-success-btn"),[4,this.timerManage.delay("btn-success",A.msgShowTime)];case 1:return i.sent(),this.updateBtnClassName("vp-success-btn success-ing"),[2]}})})},s.prototype.renderBtnLeftRing=function(){var t,e;this.isLight?(t=M.success,e=12):(t=M.init,e=13),this.addAnimationOfCircle(this.btnDiv,"vp-canvas-ring",t,e)},s.prototype.updateBtnClassName=function(t){this.btnDiv.className=(this.isLight?"vp-basic-btn vp-light-btn ":"vp-basic-btn vp-dark-btn ")+t},s.prototype.updateBtnLeftCont=function(t){var e=this.btnDiv.getElementsByClassName("vp-shield vp-vertical")[0];if(e&&(e.style.backgroundColor="",e.getElementsByClassName("vp-vertical-cont")[0].innerHTML=t,c.isIe())){var i=this.btnDiv.getElementsByClassName("vp-circle-i")[0],n=this.btnDiv.getElementsByClassName("vp-circle-h")[0];n&&(n.style.display="none"),i&&(i.style.display="inline-block")}},s.prototype.addAnimationOfCircle=function(t,e,i,n){var s=this,a=t.getElementsByClassName(e)[0];if(c.getIEVersion()>=9){var r=[];a&&r.push(N.create({container:t,id:e,value:100,radius:n,width:2,colors:i,target:s}))}},s}(B);window._PopupVaptcha=function(t){return new h(new I(t))}});